{# KOSPI/KOSDAQ 순위 테이블을 생성하는 매크로 #}
{% macro render_rank_table(market_prefix, title_market_name, volume_data, value_data, today) %}
<div style="flex: 1; min-width: 300px;">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
        <h4 id="{{ market_prefix }}-rank-title" style="margin: 0;">{{ today }} {{ title_market_name }} 거래량 상위 10</h4>
        <div class="btn-group btn-group-sm" id="{{ market_prefix }}-rank-selector">
            <button type="button" class="btn btn-default active" data-target="volume">거래량</button>
            <button type="button" class="btn btn-default" data-target="value">거래대금</button>
        </div>
    </div>
    <table class="table table-striped rank-table" id="{{ market_prefix }}-volume-table">
        <thead><tr><th>종목명</th><th>종가</th><th>거래량</th></tr></thead>
        <tbody>
            {% for item in volume_data %}
            <tr>
                <td class="stock-name" data-code="{{ item.Code }}" style="cursor:pointer; color:blue;">{{ item.Name }}</td>
                <td>{{ item.Close | format_price }}</td>
                <td>{{ item.Volume | format_kr }}주</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    <table class="table table-striped rank-table hidden-table" id="{{ market_prefix }}-value-table">
        <thead><tr><th>종목명</th><th>종가</th><th>거래대금</th></tr></thead>
        <tbody>
            {% for item in value_data %}
            <tr>
                <td class="stock-name" data-code="{{ item.Code }}" style="cursor:pointer; color:blue;">{{ item.Name }}</td>
                <td>{{ item.Close | format_price }}</td>
                <td>{{ item.TradingValue | format_kr }}원</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endmacro %}